"use strict";(self.webpackChunkmedia_record=self.webpackChunkmedia_record||[]).push([[265],{265:function(n,t,e){e.r(t),e.d(t,{default:function(){return m}});var r=e(150);var a=e(154);function i(n){return function(n){if(Array.isArray(n))return(0,r.Z)(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||(0,a.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o,c=e(335),u=e(97),s="voice_container__byIbi",d="voice_button__tLDgr",f=e(263);function l(n){return(0,f.jsx)("div",{className:d,onClick:n.onClick,children:(0,f.jsx)("p",{children:n.status?"\u5f00\u59cb":"\u505c\u6b62"})})}function v(){var n=(0,u.useState)(!0),t=(0,c.Z)(n,2),e=t[0],r=t[1],a=function(){var n=(0,u.useState)([]),t=(0,c.Z)(n,2),e=t[0],r=t[1],a=[];return[e,function(){o?o.start():navigator.mediaDevices.getUserMedia({audio:!0}).then((function(n){var t=new MediaRecorder(n);o=t,t.onstart=function(n){a=[]},t.ondataavailable=function(n){a.push(n.data)},t.onstop=function(n){r(a)},t.start()}))},function(){o&&o.stop()}]}(),s=(0,c.Z)(a,3),d=s[0],f=s[1],l=s[2],v=(0,u.useState)([]),m=(0,c.Z)(v,2),h=m[0],b=m[1];(0,u.useEffect)((function(){if(0!==d.length){var n=new Blob(d,{type:"audio/ogg; codecs=opus"}),t=window.URL.createObjectURL(n);b((function(n){return[].concat(i(n),[t])}))}}),[d]);return[e,h,function(){(function(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return alert("\u8bbe\u5907\u4e0d\u652f\u6301\u5f55\u97f3\uff0c\u63a8\u8350\u4f7f\u7528Chrome\u6d4f\u89c8\u5668\u3002"),!1;return!0})()&&(!0===e?f():l(),r(!e))}]}function m(){var n=v(),t=(0,c.Z)(n,3),e=t[0],r=t[1],a=t[2];return(0,f.jsxs)("article",{className:s,children:[(0,f.jsx)("main",{children:(0,f.jsx)(l,{onClick:a,status:e})}),(0,f.jsx)("aside",{children:"\u5f55\u97f3\u5217\u8868"}),(0,f.jsx)("footer",{children:r.map((function(n,t){return(0,f.jsx)("audio",{controls:!0,src:n},t)}))})]})}}}]);
//# sourceMappingURL=265.4606ce33.chunk.js.map